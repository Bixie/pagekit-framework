!function(e){function s(l){if(a[l])return a[l].exports;var t=a[l]={exports:{},id:l,loaded:!1};return e[l].call(t.exports,t,t.exports,s),t.loaded=!0,t.exports}var a={};return s.m=e,s.c=a,s.p="",s(0)}({0:function(e,s,a){var l,t;l=a(11),t=a(22),e.exports=l||{},e.exports.__esModule&&(e.exports=e.exports["default"]),t&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=t)},11:function(e,s){"use strict";e.exports={mixins:[BixieFieldtypeMixin],settings:{path:{type:"text",label:"Upload folder",tip:"Folder will be a subfolder of Pagekit storage",attrs:{"class":"uk-form-width-large"}},text1:{type:"paragraph",text:"To enable uploads, make sure to allow uploading in the usergroups permissions (section bixie/framework)",attrs:{"class":"uk-text-small"}},allowed:{type:"tags",label:"Allowed extensions",options:["png","jpg","jpeg","gif","svg","csv","xlsx","pdf","zip","gz"],attrs:{"class":"uk-form-width-large"}},max_size:{type:"number",label:"Max file size (Mb)",attrs:{"class":"uk-form-width-medium uk-text-right",min:0}},max_files:{type:"number",label:"Max files (0 is unlimited)",attrs:{"class":"uk-form-width-medium uk-text-right",min:0}}},appearance:{},data:function(){return{action:window.$fieldtypes.ajax_url,path:"uploads",upload:{},selected:[],message:{message:"",msg_class:""},fieldid:_.uniqueId("formmakerfield_")}},created:function(){this.field.data.path&&this.$set("path",this.field.data.path)},computed:{allowedUploads:function(){return this.field.data.max_files>=1?this.field.data.max_files-this.fieldValue.value.length:!0}},methods:{isImage:function(e){return e.match(/\.(?:gif|jpe?g|png|svg|ico)$/i)},clearMessage:function(){this.$set("message.message","")},setMessage:function(e,s){this.$set("message.message",e),this.$set("message.msg_class","uk-alert-"+(s||"danger"))}},filters:{fileSize:function(e){var s=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,s)).toFixed(2)+" "+["B","kB","MB","GB","TB"][s]}},events:{"hook:ready":function(){var e=this,s={action:this.$url.route(e.action),single:!1,allow:"*.("+e.field.data.allowed.join("|")+")",notallowed:function(s,a){e.setMessage(e.$trans("File extension not allowed."))},before:function(s,a){return e.allowedUploads!==!0&&e.allowedUploads<a.length?(e.setMessage(e.$trans("Maximum number of files reached.")),!1):e.field.data.max_size>0&&_.filter(a,function(s){return s.size>1024*e.field.data.max_size*1024}).length?(e.setMessage(e.$trans("File is too large.")),!1):void _.assign(s.params,{field_id:e.field.id,action:"uploadAction",path:e.path,_csrf:$pagekit.csrf})},loadstart:function(){e.clearMessage(),e.$set("upload.running",!0),e.$set("upload.progress",0)},progress:function(s){e.$set("upload.progress",Math.ceil(s))},allcomplete:function(s){var a=$.parseJSON(s);e.setMessage(a.message,a.error?"danger":"success"),a.files&&(a.files.forEach(function(s){e.addValue(s.name,s)}),e.$dispatch("upload.success")),e.$set("upload.progress",100),setTimeout(function(){e.$set("upload.running",!1)},1500)}};UIkit.uploadSelect(this.$el.querySelector(".uk-form-file > input"),s),UIkit.uploadDrop(this.$el.querySelector(".uk-placeholder"),s)}}},window.BixieFieldtypes.components.upload=e.exports},22:function(e,s){e.exports='<div :class="classes([\'uk-form-row\', (isAdmin ? \'uk-hidden\' : \'\')], field.data.classSfx)"> <label :for=fieldid class=uk-form-label v-show=!field.data.hide_label>{{ fieldLabel | trans }} <a v-if="field.data.help_text && field.data.help_show == \'tooltip_icon\'" class="uk-icon-info uk-icon-hover uk-margin-small-top uk-float-right" :title=field.data.help_text data-uk-tooltip="{delay: 100}"></a> </label> <div class=uk-form-controls> <div v-if=message.message class=uk-alert :class=message.msg_class>{{ message.message }}</div> <ul class="uk-list uk-list-striped" v-if=fieldValue.value.length> <li v-for="file in valuedata" class="uk-flex uk-flex-middle"> <div class="uk-flex-item-1 uk-margin-left"> <a class="uk-icon-hover uk-icon-trash-o uk-float-right uk-margin-small-top uk-margin-small-right" @click=removeValue(file.value) :title="\'Remove file\' | trans"></a> <h4 class=uk-margin-remove> <a :href=$url(file.url) download><i class="uk-icon-file-o uk-margin-small-right"></i>{{ file.name }}</a> </h4> <small>{{ file.size | fileSize }}</small> </div> <div v-if=isImage(file.url) class=uk-margin-left> <img :src=$url(file.url) :alt=file.name style="max-height: 100px"/> </div> </li> </ul> <div v-show=allowedUploads class=uk-placeholder> <i class="uk-icon-cloud-upload uk-margin-small-right"></i> {{ \'Please drop a file here or \' | trans }}<a class=uk-form-file>{{ \'select a file\' | trans }}<input type=file name=files[] multiple=multiple></a>. </div> <div class="uk-progress uk-progress-mini uk-margin-remove" v-show=upload.running> <div class=uk-progress-bar :style="{width: upload.progress + \'%\'}"></div> </div> <p v-if="field.data.help_text && field.data.help_show == \'block\'" class=uk-form-help-block>{{{field.data.help_text}}}</p> </div> </div>'}});